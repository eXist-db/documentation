<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>WebDAV</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2"/><meta name="keywords" content="getting-started, interfaces"/></head><body><div class="article"><div class="titlepage"><div><div><h1 class="title"><a id="d5e1"/>WebDAV</h1></div></div><hr/></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="sect1"><a href="#compatibility">Compatibility</a></span></dt><dt><span class="sect1"><a href="#clients">Clients</a></span></dt><dd><dl><dt><span class="sect2"><a href="#webfolders">Windows Web Folders</a></span></dt><dt><span class="sect2"><a href="#macos">macOS Finder</a></span></dt><dt><span class="sect2"><a href="#oxygenxml">oXygen XML Editor</a></span></dt><dt><span class="sect2"><a href="#d5e108">davfs2</a></span></dt><dt><span class="sect2"><a href="#kde">KDE Konqueror</a></span></dt><dt><span class="sect2"><a href="#libreoffice">LibreOffice</a></span></dt></dl></dd><dt><span class="sect1"><a href="#serialization">Serialization</a></span></dt><dt><span class="sect1"><a href="#notes">Notes</a></span></dt></dl></div><p>eXist-db ships with a <a class="link" href="http://en.wikipedia.org/wiki/WebDAV" target="_top">WebDAV</a> interface.
        WebDAV makes it possible to manage database collections and documents just like directories and
        files in a file system. You can copy, move, delete, view or edit files with any application
        supporting the WebDAV protocol, including Windows Explorer, macOS Finder, <a class="link" href="http://www.webdav.org/cadaver" target="_top">cadaver</a>, <a class="link" href="http://www.konqueror.org/" target="_top">KDE Konqueror</a>, <a class="link" href="http://www.oxygenxml.com/" target="_top">oXygen XML Editor</a>, <a class="link" href="http://www.altova.com/" target="_top">XML Spy</a>, <a class="link" href="http://www.libreoffice.org/" target="_top">LibreOffice</a> and many others (see <a class="xref" href="#compatibility" title="Compatibility">the section called “Compatibility”</a>
        below).</p><p>In the default configuration the WebDAV server can be accessed via the URLs <a class="link" href="http://localhost:8080/exist/webdav/db/" target="_top">http://localhost:8080/exist/webdav/db/</a> and <a class="link" href="https://localhost:8443/exist/webdav/db/" target="_top">https://localhost:8443/exist/webdav/db/</a> (since eXist-db 2.0). </p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="compatibility"/>Compatibility</h2></div></div></div><p>The <a class="link" href="http://milton.io" target="_top">Milton</a> project, on which eXist-db's WebDAV implementation is
            build, maintains a detailed WebDAV client compatibility list that describes a "Recipe for
            broad client compatibility." In case of any problems please read this document. Some
            preliminary points specific to eXist should be kept in mind:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>For Windows 7 see notes below and the Milton documentation.</p></li><li class="listitem"><p>eXist's Milton based WebDAV interface does currently not support HTTP Digest
                    Authentication.</p></li><li class="listitem"><p>The size of an XML document is presented as a multiple of 4096 bytes, which is eXist's
                    internal pagesize (see <a class="link" href="configuration.xml#conf.xml" target="_top">conf.xml</a>). The actual size of an XML
                    document stored in the database can not be determined because the size depends on many
                    factors, among which the serialization parameters applied.</p></li></ul></div><p>The Milton-based WebDAV interface has been successfully tested with: Windows Web Folders
            (Windows XP/7), <a class="link" href="http://www.jscape.com/products/file-transfer-clients/anyclient/" target="_top">AnyClient</a> (cross-platform), macOS Finder, <a class="link" href="http://www.panic.com/transmit/" target="_top">Transmit</a> (macOS), <a class="link" href="http://cyberduck.ch/" target="_top">Cyberduck</a>, davfs2 version 1.4.5
            (Linux), OxygenXML and LibreOffice.</p><p>The following clients are reported to have issues: <a class="link" href="http://en.wikipedia.org/wiki/GVFS" target="_top">GVFS</a> (Nautilus) and <a class="link" href="http://www.netdrive.net/" target="_top">NetDrive</a>. However, this can change over time!</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clients"/>Clients</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="webfolders"/>Windows Web Folders</h3></div></div></div><p>Out of the box, Windows has <span class="emphasis"><em>some</em></span> native support for the WebDAV
                protocol, but there are some well-known issues. Please consult the following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Be aware that there are multiple versions of WebDAV Microsoft libraries (and
                        different flavors of bugs). See <a class="link" href="http://greenbytes.de/tech/webdav/webfolder-client-list.html" target="_top">Web Folder Client (MSDAIPP.DLL) Versions and Issues</a>.</p></li><li class="listitem"><p>Windows Vista and Windows 7 both restrict access to WebDAV servers that use Basic
                        HTTP authentication on non-SSL connections. This restriction can be solved by changing a
                        registry key. Read more on <a class="link" href="http://support.microsoft.com/kb/841215" target="_top">MSDN</a> and
                        <a class="link" href="http://greenbytes.de/tech/webdav/webdav-redirector-list.html" target="_top">greenbytes.de</a>. However, SSL connections do bring improved
                        security.</p></li></ul></div><p>To use WebDAV in Internet explorer:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Select <span class="guimenuitem">File -&gt; Open</span>.</p></li><li class="listitem"><p>Fill in URL, for instance <code class="literal">http://localhost:8080/exist/webdav/db/</code>
                        or <code class="literal">https://localhost:8443/exist/webdav/db/</code>.</p></li><li class="listitem"><p>Check <span class="guimenuitem">Open as Web Folder</span>.</p></li><li class="listitem"><p>Click <span class="guimenuitem">Ok</span>.</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="macos"/>macOS Finder</h3></div></div></div><p>The eXist-db database can be accessed easily with the macOS Finder using the
                <span class="guimenuitem">Go, Connect to Server...</span> menu. Use the eXist-db WebDAV URL
                <code class="code">http://localhost:8080/exist/webdav/db/</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="file:/opt/oxygen/20/frameworks/docbook/css/img/note.png"/></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>In some previous MacOS releases, Apple repetitively changed their WebDAV
                    implementation significantly, introducing new bugs and problems. The main issue is that
                    Finder requires exact document sizes reported for PROPFIND where eXist-db by default
                    reports an estimated size as described above.</p><p>As a workaround, eXist-db detects the MacOS finder via the "user-agent" HTTP header
                    and switches for PROPFIND into a kind of MacOS compatibility mode, where all XML documents
                    in a collection are serialized to determine the exact sizes of these documents. This is a
                    rather expensive and time consuming operation for large documents and for collections with
                    many documents.</p><p>As an alternative it is recommended to use <a class="link" href="http://www.panic.com/transmit/" target="_top">Transmit</a> or <a class="link" href="http://cyberduck.ch/" target="_top">Cyberduck</a> instead.</p><p>For macOS 10.8 the WebDAV client has become functional (again) in 10.8.2, but still
                    the client does not work perfectly, for instance at bulk operations.</p></td></tr></table></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="oxygenxml"/>oXygen XML Editor</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Select <code class="literal">File -&gt; Open URL</code>.</p></li><li class="listitem"><p>Fill <code class="literal">User</code> and <code class="literal">Password</code>.</p></li><li class="listitem"><p>Enter <code class="literal">Server URL</code> http://localhost:8080/exist/webdav/db/.</p></li><li class="listitem"><p>Click <code class="literal">Browse</code>.</p></li></ul></div><div class="informalfigure"><div class="mediaobject"><img src="../../assets/webdav_oxygen.png"/></div></div><p> More info on the <a class="link" href="http://www.oxygenxml.com/xml_editor/ftp_webdav.html/" target="_top">oXygen</a> product pages. </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="file:/opt/oxygen/20/frameworks/docbook/css/img/note.png"/></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Note on SSL connections in oXygen: You may encounter an error: <span class="emphasis"><em>"Error:
                    sun.security.validator.ValidatorException: PKIX path building failed:
                    sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid
                    certification path to requested target."</em></span>
                </p><p>In order to avoid this error, you'll need to add the Server certificate to your
                    trusted certificates keystore (<a class="link" href="http://java.sun.com/j2se/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#CustomizingStores" target="_top">more info</a>).</p></td></tr></table></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="file:/opt/oxygen/20/frameworks/docbook/css/img/warning.png"/></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>When saving a document to the WebDAV server via oXygen, remember to double check that
                    the document's path in the File URL field at the top of the dialog does really contain the
                    URL to which you want to save the document to. It happens too easily that when you click
                    on another folder or resource by mistake, you overwrite the wrong resource. </p></td></tr></table></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="d5e108"/>davfs2</h3></div></div></div><p>Recent eXist versions present by default, through WebDAV, the size of XML documents as a multiple of internal pagesize. 
                This approximated size is not managed correctly by davfs2. You can list XML files (<code class="code">ls -l</code>) but you cannot 
                view or edit them. All other file types (plain text files, images, etc) are working as expected with davfs2.   
            </p><p>The following message is found in davfs2 logs (syslog/journalctl) :              
                <span class="errortext">Could not read response body: connection was closed by server</span>
            </p><p>
                In order to access XML files stored in eXist from
                a mounted directory in a filesystem thanks to dafvs2, you have to add the following additional Java parameters 
                when starting eXist : </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">org.exist.webdav.PROPFIND_METHOD_XML_SIZE=EXACT</code></p></li><li class="listitem"><p><code class="literal">org.exist.webdav.GET_METHOD_XML_SIZE=EXACT</code></p></li></ul></div><p>Please note that if eXist is installed as a service (systemd) the configuration has to be done in <code class="filename">/tools/yajsw/conf/wrapper.conf</code></p><pre class="programlisting"/><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="file:/opt/oxygen/20/frameworks/docbook/css/img/note.png"/></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p><code class="literal">NULL</code> and <code class="literal">APPROXIMATE</code> values work for Oxygen and Cadaver but only <code class="literal">EXACT</code> can be used if davfs2 is needed.</p></td></tr></table></div><p>These changes won't be taken into account if you do not uninstall the service <span class="bold"><strong>before</strong></span> 
                modifying <code class="filename">wrapper.conf</code>. The service must then be reinstalled :                     
            </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Uninstall (with service name <span class="emphasis"><em>eXist-db</em></span>)                  
                    </p><pre class="programlisting">
sudo systemctl stop <span class="emphasis"><em>eXist-db</em></span> &amp;&amp; sudo systemctl disable <span class="emphasis"><em>eXist-db</em></span> &amp;&amp; sudo systemctl daemon-reload &amp;&amp; sudo systemctl reset-failed   
                    </pre></li><li class="listitem"><p>Reinstall and enable</p><pre class="programlisting">
sudo /opt/eXist-db/tools/yajsw/bin/installDaemon.sh
sudo systemctl enable <span class="emphasis"><em>eXist-db</em></span>                    
                </pre></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="file:/opt/oxygen/20/frameworks/docbook/css/img/note.png"/></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Tested on davfs2 1.4.7 on RHEL7.5 and 1.5.4 on Arch Linux.</p></td></tr></table></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="kde"/>KDE Konqueror</h3></div></div></div><p>Enter an URL like <code class="literal">webdav://localhost:8080/exist/webdav/db</code>. Use
                <code class="literal">webdavs://</code> for WebDAV over SSL. </p><div class="informalfigure"><div class="mediaobject"><img src="../../assets/webdav_konqueror.png"/></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="libreoffice"/>LibreOffice</h3></div></div></div><p>For LibreOffice and OpenOffice.org the recommended way for opening documents stored in
                eXist-db is using the 'native' WebDAV client, as documented in the <a class="link" href="http://help.libreoffice.org/Common/Opening_a_Document_Using_WebDAV_over_HTTPS" target="_top">LibreOffice Help</a> documentation.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="file:/opt/oxygen/20/frameworks/docbook/css/img/warning.png"/></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>When using LibreOffice on MacOS, do not write documents to a network share that is
                    mounted via Finder as documented earlier, since this could corrupt your database. The
                    problem has been identified but there is no solution yet. Please use the alternative
                    described in this chapter.</p></td></tr></table></div><p>The first step is configuring LibreOffice to use the LibreOffice Open/Save dialogs,
                instead of the dialogs that are provided by the operating system: </p><div class="informalfigure"><div class="mediaobject"><img src="../../assets/webdav_libreoffice_settings.gif"/></div></div><p> Now it is possible to type an URL in the <span class="guimenuitem">File, Open</span> dialog.
                Enter <code class="code">http://localhost:8080/exist/webdav/db/</code> and provide your login
                credentials. Now the dialog box shows the content of the database: </p><div class="informalfigure"><div class="mediaobject"><img src="../../assets/webdav_libreoffice_open.gif"/></div></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="serialization"/>Serialization</h2></div></div></div><p> When retrieving an XML document via the WebDAV interface, the default serialization
            settings as defined in <a class="link" href="configuration.xml#conf.xml" target="_top">conf.xml</a> are used. It is however possible to
            define custom serialization settings specific for the WebDAV interface. </p><p> Copy the file <code class="literal">extensions/webdav/webdav.properties</code> into
            <code class="literal">$EXIST_HOME</code> directory and uncomment/modify the parameters. Changes in
            this file requires a restart of eXist-db. </p><pre class="programlisting"/></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="notes"/>Notes</h2></div></div></div><p> From the <a class="link" href="https://github.com/eXist-db/exist/issues/1442" target="_top">community</a> we have received feedback that the WebDAV interface is not fully
            functional when it is accessed via a reverse proxy and a resource's path is altered (aliased)
            with it. </p></div></div></body></html>